<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
<title>G·ª≠i c√°c t√¨nh y√™u üíó</title>

<!-- Import font Poppins -->
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap" rel="stylesheet">

<style>
  :root {
    --bg1: #fff8fb;
    --bg2: #ffeef6;
    --accent: #ff4f81;
  }

  * {
    box-sizing: border-box;
    -webkit-tap-highlight-color: transparent;
  }

  html, body {
    height: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
    font-family: "Poppins", system-ui, Arial, sans-serif;
    background: linear-gradient(180deg, var(--bg1), var(--bg2));
    -webkit-text-size-adjust: 100%;
    -webkit-font-smoothing: antialiased;
  }

  canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: block;
    touch-action: none;
  }

  .screen {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: opacity .8s ease, transform .8s ease;
  }
  .hidden { 
    opacity: 0; 
    pointer-events: none; 
    transform: scale(.98); 
  }

  .centerText {
    position: absolute;
    z-index: 50;
    text-align: center;
    padding: 16px 28px;
    border-radius: 999px;
    border: 2px solid rgba(255,100,150,0.14);
    background: rgba(255,255,255,0.92);
    box-shadow: 0 14px 40px rgba(255,120,160,0.1);
    cursor: pointer;
    transition: transform .15s ease;
    max-width: 90%;
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  .centerText:active { transform: scale(0.98); }
  .centerText .title {
    font-size: clamp(20px, 5vw, 32px);
    color: var(--accent);
    font-weight: 800;
    line-height: 1.2;
  }

  .finalText {
    position: absolute;
    text-align: center;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
    opacity: 0;
    transition: opacity 1.5s ease;
    background: rgba(255, 200, 220, 0.3);
    padding: 20px 30px;
    border-radius: 20px;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    z-index: 60;
    width: 85%;
    max-width: 400px;
  }
  .finalText.show { opacity: 1; }
  .finalText .main {
    font-size: clamp(20px, 6vw, 34px);
    font-weight: 800;
    color: #fff;
    text-shadow: 0 0 12px rgba(255,100,160,0.8);
    line-height: 1.3;
    margin-bottom: 8px;
  }
  .finalText .sub {
    color: #fff;
    font-size: clamp(14px, 3.5vw, 18px);
    text-shadow: 0 0 6px rgba(255,120,180,0.6);
    line-height: 1.4;
  }
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>
<canvas id="mainCanvas"></canvas>

<!-- M√†n 1 -->
<div id="screen1" class="screen">
  <div class="centerText" id="cta">
    <div class="title">For my love üíó</div>
  </div>
</div>

<!-- M√†n 2 -->
<div id="screen2" class="screen hidden">
  <div id="finalText" class="finalText">
    <div class="main">Happy Women's Day üíó</div>
    <div class="sub">Thanks for always being your beautiful, strong self.</div>
  </div>
</div>

<script>
const bgCanvas = document.getElementById("bgCanvas");
const mainCanvas = document.getElementById("mainCanvas");
const bgCtx = bgCanvas.getContext("2d");
const mCtx = mainCanvas.getContext("2d");

function fit() {
  const DPR = window.devicePixelRatio || 1;
  const width = window.innerWidth;
  const height = window.innerHeight;
  
  bgCanvas.width = width * DPR;
  bgCanvas.height = height * DPR;
  mainCanvas.width = width * DPR;
  mainCanvas.height = height * DPR;
  
  bgCtx.scale(DPR, DPR);
  mCtx.scale(DPR, DPR);
}

fit();
window.addEventListener("resize", fit);
window.addEventListener("orientationchange", fit);

// --- n·ªÅn hoa & tim r∆°i ---
const bgParticles = [];
const BG_COUNT = Math.round((window.innerWidth * window.innerHeight) / 90000 * 40);

function spawnParticle() {
  const type = Math.random() < 0.5 ? "petal" : "heart";
  return {
    x: Math.random() * window.innerWidth,
    y: Math.random() * window.innerHeight,
    vx: (Math.random() - 0.5) * 0.5,
    vy: 0.4 + Math.random() * 0.8,
    size: 6 + Math.random() * 14,
    rot: Math.random() * Math.PI * 2,
    drot: (Math.random() - 0.5) * 0.02,
    alpha: 0.6 + Math.random() * 0.4,
    type
  };
}
for (let i = 0; i < BG_COUNT; i++) bgParticles.push(spawnParticle());

function drawBg(dt) {
  bgCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
  for (let p of bgParticles) {
    p.x += p.vx * dt * 0.06;
    p.y += p.vy * dt * 0.06;
    p.rot += p.drot * dt * 0.06;
    bgCtx.save();
    bgCtx.globalAlpha = p.alpha;
    bgCtx.translate(p.x, p.y);
    bgCtx.rotate(p.rot);
    if (p.type === "petal") {
      bgCtx.fillStyle = "rgba(255,200,220,0.8)";
      bgCtx.beginPath();
      bgCtx.ellipse(0, 0, p.size * 0.5, p.size, 0, 0, Math.PI * 2);
      bgCtx.fill();
    } else {
      bgCtx.scale(p.size / 12, p.size / 12);
      bgCtx.beginPath();
      bgCtx.moveTo(0, 0);
      bgCtx.bezierCurveTo(0, -6, -5, -14, -12, -14);
      bgCtx.bezierCurveTo(-25, -14, -25, 6, 0, 20);
      bgCtx.bezierCurveTo(25, 6, 25, -14, 12, -14);
      bgCtx.bezierCurveTo(5, -14, 0, -6, 0, 0);
      bgCtx.fillStyle = "rgba(255,120,160,0.7)";
      bgCtx.fill();
    }
    bgCtx.restore();
    if (p.y > window.innerHeight + 30) {
      p.x = Math.random() * window.innerWidth;
      p.y = -20;
    }
  }
}

// --- tim gh√©p ---
let assembling = false, assembled = false, assembleParticles = [];

function heartPoints(cx, cy, s, count = 250) {
  const pts = [];
  for (let i = 0; i < count; i++) {
    const t = Math.PI * 2 * (i / count);
    const x = 16 * Math.pow(Math.sin(t), 3);
    const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
    pts.push({x: cx + x * s, y: cy - y * s});
  }
  return pts;
}

function startAssemble() {
  assembleParticles = [];
  const cx = window.innerWidth / 2, cy = window.innerHeight / 2;
  const s = Math.min(window.innerWidth, window.innerHeight) / 35;
  const pts = heartPoints(cx, cy, s);
  for (let pt of pts) {
    assembleParticles.push({
      x: Math.random() * window.innerWidth,
      y: window.innerHeight + Math.random() * 200,
      tx: pt.x, ty: pt.y,
      vx: 0, vy: 0,
      size: 5 + Math.random() * 6,
      hue: 320 + Math.random() * 30,
      alpha: 0.9
    });
  }
  assembling = true;
}

function drawAssemble(dt) {
  if (!assembling) return;
  let done = true;
  for (let p of assembleParticles) {
    p.vx += (p.tx - p.x) * 0.05;
    p.vy += (p.ty - p.y) * 0.05;
    p.vx *= 0.88; p.vy *= 0.88;
    p.x += p.vx * dt * 0.06;
    p.y += p.vy * dt * 0.06;
    mCtx.save();
    mCtx.globalAlpha = p.alpha;
    mCtx.translate(p.x, p.y);
    mCtx.scale(p.size / 12, p.size / 12);
    mCtx.beginPath();
    mCtx.moveTo(0, 0);
    mCtx.bezierCurveTo(0, -6, -5, -14, -12, -14);
    mCtx.bezierCurveTo(-25, -14, -25, 6, 0, 20);
    mCtx.bezierCurveTo(25, 6, 25, -14, 12, -14);
    mCtx.bezierCurveTo(5, -14, 0, -6, 0, 0);
    mCtx.fillStyle = `hsl(${p.hue}, 80%, 70%)`;
    mCtx.fill();
    mCtx.restore();
    if (Math.hypot(p.x - p.tx, p.y - p.ty) > 3) done = false;
  }
  if (done && !assembled) assembled = true;
}

let last = performance.now();
function loop(now) {
  const dt = now - last; last = now;
  drawBg(dt);
  mCtx.clearRect(0, 0, window.innerWidth, window.innerHeight);
  drawAssemble(dt);
  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

const screen1 = document.getElementById("screen1");
const screen2 = document.getElementById("screen2");
const cta = document.getElementById("cta");
const finalText = document.getElementById("finalText");

function handleClick() {
  screen1.classList.add("hidden");
  setTimeout(() => {
    screen1.style.display = "none";
    screen2.style.display = "flex";
    screen2.classList.remove("hidden");
    setTimeout(startAssemble, 500);
    const timer = setInterval(() => {
      if (assembled) { 
        finalText.classList.add("show"); 
        clearInterval(timer); 
      }
    }, 200);
  }, 700);
}

// S·ª≠ d·ª•ng c·∫£ touch v√† click ƒë·ªÉ t∆∞∆°ng th√≠ch t·ªët h∆°n
cta.addEventListener("click", handleClick);
cta.addEventListener("touchend", function(e) {
  e.preventDefault();
  handleClick();
});
</script>

</body>
</html>